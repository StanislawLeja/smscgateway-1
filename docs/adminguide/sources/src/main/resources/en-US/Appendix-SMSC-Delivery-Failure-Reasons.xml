<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "../${ent.filename}">
%BOOK_ENTITIES;
]>
<appendix
	id="appendix-SMSC-delivery-failure-reasons">
	<title>Reasons for Delivery Failure</title>
<para>
			&THIS.PLATFORM; &THIS.APPLICATION; is configured to generate CDR in a plain text file located at <filename>telscale-smscgateway-&lt;version&gt;/jboss-5.1.0.GA/server/&lt;profile&gt;/log/cdr.log</filename>.
		</para>
<para>The last field in the CDR generated is "Reason for failure", which records the reason for delivery failure and is empty if the delivery is successful. The possible delivery failure cases are explained below.
		<variablelist>
			<title>Reasons for Delivery Failure</title>
			<varlistentry>
				<term>XXX response from HLR</term>
				<listitem><para>A MAP error message is received from HLR after SRI request; XXX: <literal>AbsentSubscriber</literal>, <literal>AbsentSubscriberSM</literal>, <literal>CallBarred</literal>, <literal>FacilityNotSuppored</literal>, <literal>SystemFailure</literal>, <literal>UnknownSubscriber</literal>, <literal>DataMissing</literal>, <literal>UnexpectedDataValue</literal>, <literal>TeleserviceNotProvisioned</literal>.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term>Error response from HLR: xxx</term>
				<listitem><para>Another MAP error message is received from HLR after SRI request.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term>Error XXX after <literal>MtForwardSM</literal> Request</term>
				<listitem><para>A MAP error message is received from MSC/VLR after <literal>MtForwardSM</literal> request; XXX: <literal>subscriberBusyForMtSms</literal>, <literal>absentSubscriber</literal>, <literal>absentSubscriberSM</literal>, <literal>smDeliveryFailure</literal>, <literal>systemFailure</literal>, <literal>facilityNotSup</literal>, <literal>dataMissing</literal>, <literal>unexpectedDataValue</literal>, <literal>facilityNotSupported</literal>, <literal>unidentifiedSubscriber</literal>, <literal>illegalSubscriber</literal>.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term>Error after <literal>MtForwardSM</literal> Request: xxx</term>
				<listitem><para>Another MAP error message is received from MSC/VLR after <literal>MtForwardSM</literal> request.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term>DialogClose after <literal>MtRequest</literal></term>
				<listitem><para>No <literal>MtForwardSM</literal> response and no error message received after <literal>MtForwardSM</literal> request.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>onDialogProviderAbort</literal> after <literal>MtForwardSM</literal> Request</term>
				<listitem><para>MAP <literal>DialogProviderAbort</literal> is received after <literal>MtForwardSM</literal> request.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>onDialogProviderAbort</literal> after SRI Request</term>
				<listitem><para>MAP <literal>DialogProviderAbort</literal> is received after SRI request.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term>Error condition when invoking <literal>sendMtSms()</literal> from <literal>onDialogReject()</literal></term>
				<listitem><para>After a <literal>MtForwardSM</literal> request MAP version conflict, MAP message negotiation was processed but this process failed, or other fundamental MAP error occurred.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>onDialogReject</literal> after SRI Request</term>
				<listitem><para>After a SRI request MAP version conflict, MAP message negotiation was processed but this process failed, or other fundamental MAP error occurred.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>onDialogTimeout</literal> after <literal>MtForwardSM</literal> Request</term>
				<listitem><para>Dialog timeout occurred after <literal>MtForwardSM</literal> Request. The reason may be GSM network connection failure or SMSC overload.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>onDialogTimeout</literal> after SRI Request</term>
				<listitem><para>Dialog timeout occurred after SRI Request. The reason may be GSM network connection failure or SMSC overload.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>onDialogUserAbort</literal> after <literal>MtForwardSM</literal> Request</term>
				<listitem><para><literal>DialogUserAbort</literal> message is received from a peer or sent to a peer. The reason may be GSM fundamental failure or SMSC overload.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>onDialogUserAbort</literal> after SRI Request</term>
				<listitem><para><literal>DialogUserAbort</literal> message is received from a peer or sent to a peer. The reason may be GSM fundamental failure or SMSC overload.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>onRejectComponent</literal> after <literal>MtForwardSM</literal> Request</term>
				<listitem><para>Reject component was received from a peer or sent to a peer. This is an abnormal case and implies MAP incompatibility.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term><literal>onRejectComponent</literal> after SRI Request</term>
				<listitem><para>Reject component was received from a peer or sent to a peer. This is an abnormal case and implies MAP incompatibility.</para></listitem>
			</varlistentry>
			<varlistentry>
				<term>Other</term>
				<listitem><para>Any other message that usually indicates some internal failure.</para></listitem>
			</varlistentry>
		</variablelist>
		</para>
</appendix>
