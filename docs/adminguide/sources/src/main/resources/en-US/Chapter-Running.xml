<?xml version='1.0'?>
<!DOCTYPE book PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
<!ENTITY % BOOK_ENTITIES SYSTEM "${ent.filename}">
%BOOK_ENTITIES;
]>

<chapter id="running">

	<title>Running</title>
	
	<section id="running_the_gateway">
		<title>Running the Gateway</title>
			<procedure>
				<title>Run &THIS.PLATFORM; &THIS.APPLICATION;</title>
				<step><para>Pre-requisite: </para>
					 <substeps>
						<step><para>You must have &THIS.PLATFORM; &THIS.APPLICATION; installed as explained in the Installation Guide.</para>
						</step>	
						<step><para>If you are using the SS7 board on server, you must ensure that the <literal>java.library.path</literal> variable is set to point to the directory containing the native component. Alternatively you can copy it to the JBoss native library path manually.</para></step>
					</substeps>
				</step>
				<step>
					<para>All you have to do to start the Gateway is start the JBoss Application Server. To start the JBoss Server you must execute the <filename>run.sh</filename> (Unix) or <filename>run.bat</filename> (Microsoft Windows)
					startup script in the <filename>telscale-smscgateway-6.1.1.GA/jboss-5.1.0.GA/bin</filename> folder (on Unix or Windows). Note that this will start the server in the default profile. The "default" profile is a clean profile where you will have to start from scratch and configure the entire SS7 Stack and SMSC Gateway.
					</para>
				</step>
				<step><para>Result: If the service started properly you should see the following last few output lines in the Unix terminal or Command Prompt depending on your environment:
	<screen><![CDATA[
11:14:10,768 INFO  [DeploymentMBeanImpl] (main) Installing DeployableUnitID[url=file:/home/vinu/Downloads/smsc-telscale-slee-6.1.1.GA/jboss-5.1.0.GA/server/default/deploy/smsc-service-du-6.1.2-TelScale-SNAPSHOT.jar/]
11:14:11,452 INFO  [DeploymentMBeanImpl] (main) Installed EventTypeID[name=org.mobicents.smsc.slee.services.smpp.server.events.DELIVER_SM,vendor=org.mobicents,version=1.0]
11:14:11,455 INFO  [DeploymentMBeanImpl] (main) Installed EventTypeID[name=org.mobicents.smsc.slee.services.smpp.server.events.SUBMIT_SM,vendor=org.mobicents,version=1.0]
11:14:11,565 INFO  [DeploymentMBeanImpl] (main) Installed SbbID[name=AlertSbb,vendor=org.mobicents,version=1.0]
11:14:11,603 INFO  [DeploymentMBeanImpl] (main) Installed SbbID[name=RxSmppServerSbb,vendor=org.mobicents,version=1.0]
11:14:11,677 INFO  [DeploymentMBeanImpl] (main) Installed SbbID[name=SriSbb,vendor=org.mobicents,version=1.0]
11:14:11,736 INFO  [DeploymentMBeanImpl] (main) Installed SbbID[name=MoSbb,vendor=org.mobicents,version=1.0]
11:14:11,983 INFO  [DeploymentMBeanImpl] (main) Installed SbbID[name=MtSbb,vendor=org.mobicents,version=1.0]
11:14:12,031 INFO  [DeploymentMBeanImpl] (main) Installed SbbID[name=TxSmppServerSbb,vendor=org.mobicents,version=1.0]
11:14:12,091 INFO  [DeploymentMBeanImpl] (main) Installed ServiceID[name=SmscRxSmppServerService,vendor=org.mobicents,version=1.0]. Root sbb is SbbID[name=RxSmppServerSbb,vendor=org.mobicents,version=1.0]
11:14:12,091 INFO  [DeploymentMBeanImpl] (main) Installed ServiceID[name=MoService,vendor=org.mobicents,version=1.0]. Root sbb is SbbID[name=MoSbb,vendor=org.mobicents,version=1.0]
11:14:12,092 INFO  [DeploymentMBeanImpl] (main) Installed ServiceID[name=SmscTxSmppServerService,vendor=org.mobicents,version=1.0]. Root sbb is SbbID[name=TxSmppServerSbb,vendor=org.mobicents,version=1.0]
11:14:12,092 INFO  [DeploymentMBeanImpl] (main) Installed ServiceID[name=MtService,vendor=org.mobicents,version=1.0]. Root sbb is SbbID[name=SriSbb,vendor=org.mobicents,version=1.0]
11:14:12,093 INFO  [DeploymentMBeanImpl] (main) Installed ServiceID[name=AlertService,vendor=org.mobicents,version=1.0]. Root sbb is SbbID[name=AlertSbb,vendor=org.mobicents,version=1.0]
11:14:12,093 INFO  [DeploymentMBeanImpl] (main) Installed DeployableUnitID[url=file:/home/vinu/Downloads/smsc-telscale-slee-6.1.1.GA/jboss-5.1.0.GA/server/default/deploy/smsc-service-du-6.1.2-TelScale-SNAPSHOT.jar/]
11:14:12,393 INFO  [ServiceManagementImpl] (main) Activated ServiceID[name=MoService,vendor=org.mobicents,version=1.0]
11:14:12,645 INFO  [ServiceManagementImpl] (main) Activated ServiceID[name=AlertService,vendor=org.mobicents,version=1.0]
11:14:12,896 INFO  [ServiceManagementImpl] (main) Activated ServiceID[name=SmscTxSmppServerService,vendor=org.mobicents,version=1.0]
11:14:13,147 INFO  [ServiceManagementImpl] (main) Activated ServiceID[name=SmscRxSmppServerService,vendor=org.mobicents,version=1.0]
11:14:13,399 INFO  [ServiceManagementImpl] (main) Activated ServiceID[name=MtService,vendor=org.mobicents,version=1.0]
11:14:13,660 INFO  [EsmeManagement] (main) Loading ESME configuration from /home/vinu/Downloads/smsc-telscale-slee-6.1.1.GA/jboss-5.1.0.GA/server/default/data/SmscManagement_esme.xml
11:14:14,023 INFO  [SmscPropertiesManagement] (main) Loading SMSC Properties from /home/vinu/Downloads/smsc-telscale-slee-6.1.1.GA/jboss-5.1.0.GA/server/default/data/SmscManagement_smscproperties.xml
11:14:14,062 INFO  [SmscManagement] (main) SMSC configuration file path /home/vinu/Downloads/smsc-telscale-slee-6.1.1.GA/jboss-5.1.0.GA/server/default/data/SmscManagement_smsc.xml
11:14:14,062 INFO  [SmscManagement] (main) Started SmscManagement
11:14:14,072 INFO  [ShellServer] (main) Starting SS7 management shell environment
11:14:14,079 INFO  [ShellServer] (main) ShellExecutor listening at /127.0.0.1:3435
11:14:14,146 INFO  [Http11Protocol] (main) Starting Coyote HTTP/1.1 on http-127.0.0.1-8080
11:14:14,173 INFO  [AjpProtocol] (main) Starting Coyote AJP/1.3 on ajp-127.0.0.1-8009
11:14:14,184 INFO  [ServerImpl] (main) JBoss (Microcontainer) [5.1.0.GA (build: SVNTag=JBoss_5_1_0_GA date=200905221634)] Started in 1m:27s:531ms

]]>
				</screen>		
</para>
</step>
<step>
<para>If you are starting &THIS.PLATFORM; &THIS.APPLICATION; for the first time, SS7 is not configured. 
				You need to use the Shell Client to connect to the Gateway and configure the SS7 Stack. Once configured, the state and configuration of SS7 is persisted which stands server re-start. The next chapter will discuss in detail about configuration.</para> 
</step>
			</procedure>
			<procedure>
				<title>Stop the Gateway</title>
				<step><para>To stop the &THIS.PLATFORM; &THIS.APPLICATION;, you must shut down the JBoss Application Server. To shut down the server(s) you must execute the <command>shutdown.sh -s</command> (Unix) or 
					<command>shutdown.bat -s</command> (Microsoft Windows) script in the <filename>telscale-smscgateway-6.1.1.GA/jboss-5.1.0.GA/bin</filename> 
					directory (on Unix or Windows).</para></step>
				<step><para> If the server stopped properly, you will see the following three lines as the 
					last output in the Unix terminal or Command Prompt:
                        <screen><![CDATA[[Server] Shutdown complete
Halting VM]]></screen></para></step>
			</procedure>		

	</section>
<section id="running_the_gateway_simulator">
		<title>Running the Gateway - Simulator Profile</title>
			<para>The &THIS.PLATFORM; &THIS.APPLICATION; offers you an option to run the Gateway with a "simulator" profile for testing purpose. The "simulator" profile is a pre-configured profile to work with the jss7-simulator. Starting the Gateway with the "simulator" profile is similar to the steps explained for the "default" profile except that you must pass the string value "simulator" to the -c command line option when invoking the run script. 
<screen><![CDATA[
[bin]$ ./run.sh -c simulator
]]>
</screen>
</para>	

</section>
<section id="running_shell">
			<title>Running the Shell</title>	
		<para>
			You must start the Shell client and connect to the managed instance prior to executing commands to configure the Gateway. Shell can be started by issuing the following command from
			<filename>telscale-smscgateway-6.1.1.GA/jboss-5.1.0.GA/bin</filename> directory:
		</para>
		<programlisting>[$] ./ss7-cli.sh</programlisting>
		<para>Once console starts, it will print following information and await further commands:</para>
		<screen>
version=2.0.0-SNAPSHOT,name=telscale CLI,prefix=mobicents,vendor=TeleStax
telscale>
		</screen>
	<para>
			Before issuing further commands you must connect to a managed instance. For more details on connecting to an instance and for a list of all supported commands and details on configuring the SS7 stack refer to the TelScale SS7 Stack User Guide. 
		</para>

</section>

</chapter>

